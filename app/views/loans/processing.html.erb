<script>
  loanRequestid = <%= @loan.id %>
  function receivedProgress(data) {
    if(data.progress >= 100) {
      window.location = '/loans/payment_schedule/' + loanRequestid
    }
    $('#progress-bar').attr('aria-valuenow', data.progress).width(data.progress+'%');
  }

  setInterval(function() {
    $.ajax({
      type: 'POST',
      url: '/loans/progress',
      success: receivedProgress,
      data: {'id': loanRequestid}
    })
  }, 1000)
</script>
<br /><br />
<div id = "loading-bar" class = "container">
  <h1> Processing your request </h1>
  <br />
  <div class="progress">
    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
    aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id = "progress-bar" style="width:0%">
    </div>
  </div>
</div>
